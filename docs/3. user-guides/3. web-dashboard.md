# Web Dashboard Guide

HakuRiver includes an optional web dashboard that provides a graphical interface for monitoring, submitting, and managing tasks. This guide explains how to set up and use the dashboard.

## Dashboard Overview

The HakuRiver dashboard offers a visual interface with these key features:

- **Node monitoring**: CPU, memory usage, and NUMA topology
- **Task management**: Submit, monitor, and control tasks
- **Docker container management**: View and manage environments
- **Resource visualization**: Track cluster resource utilization
- **Log viewing**: Examine task output without command-line tools

![Dashboard Overview](../images/dashboard_overview.png)

## Setting Up the Dashboard

The dashboard is a Vue.js application that connects to the HakuRiver Host API.

### Prerequisites

- Node.js and npm (or yarn/pnpm)
- Running HakuRiver Host server

### Development Setup

To run the dashboard in development mode:

```bash
# Navigate to the frontend directory
cd frontend

# Install dependencies
npm install

# Start development server
npm run dev
```

The development server will start on `http://localhost:5173` and proxy API requests to the Host server.

### Production Deployment

For production use:

```bash
# Build static files
cd frontend
npm run build
```

This creates optimized files in the `frontend/dist` directory. You can serve these using any static web server:

```bash
# Example using Python's built-in HTTP server
cd frontend/dist
python -m http.server 8080
```

#### Nginx Configuration Example

For a more robust setup, use Nginx:

```nginx
server {
    listen 80;
    server_name hakuriver.example.com;

    # Serve static dashboard files
    location / {
        root /path/to/frontend/dist;
        try_files $uri $uri/ /index.html;
    }

    # Proxy API requests to the Host server
    location /api/ {
        proxy_pass http://host-server:8000/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
    }
}
```

## Using the Dashboard

### Dashboard Layout

The dashboard has a sidebar navigation with these sections:
- **Dashboard**: Overview of cluster status
- **Nodes**: Detailed node information
- **Tasks**: Task listing and management
- **Docker**: Container environment management

### Dashboard Home

The home page provides a cluster overview:

- **Node Summary**: Count of online/offline nodes
- **Resource Utilization**: CPU and memory usage across cluster
- **Task Summary**: Running, pending, completed, and failed tasks
- **Resource History**: CPU and memory usage over time

### Nodes View

The Nodes page shows detailed information about compute nodes:

- **Node List**: All registered nodes with status and resources
- **Node Details**: CPU, memory, and NUMA topology for selected node
- **Node Resources**: Current and allocated resources
- **NUMA Topology**: Visual representation of NUMA nodes

### Tasks View

The Tasks page lets you submit, monitor, and manage tasks:

#### Task Submission Form

To submit a new task:

1. Click the "Submit New Task" button
2. Enter command and arguments
3. Select target node(s)
4. Choose container environment
5. Specify resource requirements
6. Click "Submit"

![Task Submission Form](../images/task_submission_form.png)

#### Task List

The task list shows all tasks in the system:

- Task ID
- Command
- Status (running, completed, failed, etc.)
- Target node
- Submission time
- Completion time (if applicable)

#### Task Details

Click on any task to see details:

- Full command and arguments
- Environment variables
- Resource allocation
- Exit code (if completed)
- Standard output and error logs

#### Task Actions

From the task details view, you can:

- **Kill**: Terminate a running task
- **Pause/Resume**: Pause or resume a running task
- **View Logs**: See real-time updates to stdout/stderr

### Docker Management View

The Docker page provides container environment management:

#### Container List

View all containers on the Host:

- Name
- Base image
- Status (running, stopped)
- Actions (start, stop, shell, create tar)

#### Create Container Form

To create a new container:

1. Click "Create New Container"
2. Enter Docker image name (e.g., `python:3.11-slim`)
3. Enter HakuRiver container name (e.g., `my-python-env`)
4. Click "Create"

#### Container Actions

For each container, you can:

- **Start/Stop**: Control container state
- **Shell**: Open terminal access (via WebSocket)
- **Create Tar**: Package container as tarball
- **Delete**: Remove container from Host

#### Tarball Management

View and manage container tarballs:

- Container name
- Latest version timestamp
- Available versions history

## Dashboard Features

### Terminal Access

The dashboard includes a web-based terminal for accessing container shells:

1. In the Docker view, click "Shell" for a container
2. A terminal modal opens with an interactive shell
3. Use it to install packages, test commands, or debug issues

![Terminal Modal](../images/terminal_modal.png)

### Real-time Monitoring

The dashboard includes real-time monitoring features:

- Auto-refreshing node status
- Resource usage graphs
- Task status updates
- Log streaming for running tasks

### Task Log Viewer

View task output and error logs directly in the browser:

1. Click on a task in the task list
2. Navigate to the "Logs" tab
3. View stdout and stderr in separate panels
4. Refresh to see latest updates

## Keyboard Shortcuts

The dashboard supports these keyboard shortcuts:

- **Ctrl+Enter**: Submit form (in task submission)
- **Esc**: Close modals
- **F5**: Refresh current view

## Browser Compatibility

The dashboard is tested and compatible with:

- Chrome/Chromium (version 90+)
- Firefox (version 90+)
- Safari (version 14+)
- Edge (version 90+)

## Mobile Support

The dashboard is responsive and works on tablets and smartphones, with some limitations:

- Terminal access works but may be challenging on small screens
- Complex forms are better used on larger screens
- Monitoring and basic task management work well on mobile

## Troubleshooting

### API Connection Issues

If the dashboard can't connect to the Host API:

1. Check that the Host server is running
2. Verify network connectivity to the Host
3. Check for CORS issues (in development mode)
4. Ensure API proxy is correctly configured

### Performance Issues

For better dashboard performance:

1. Limit the number of running tasks
2. Reduce polling frequency for slower devices
3. Use pagination for large task lists
4. Close unused browser tabs

## Next Steps

- Learn about [task submission](task-submission.md) options
- Understand [monitoring](monitoring.md) capabilities
- Explore [container workflow](container-workflow.md) concepts