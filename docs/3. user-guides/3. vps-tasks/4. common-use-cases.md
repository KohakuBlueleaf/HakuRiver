# Common Use Cases for VPS Tasks

VPS tasks provide on-demand interactive computing environments. Here are typical scenarios where they're useful.

---

## 1. Interactive Development

### Scenario

Need to develop or debug code that requires:
- Libraries not on your local machine
- Access to GPUs or large datasets
- Specific environment configuration

### Solution

```bash
# Launch development VPS
kohakuriver vps create -t nodeA --container py-dev-env --cores 4 --memory 8G

# Connect and work
kohakuriver vps connect <task_id>

# Inside VPS:
cd /shared/myproject
python train.py --debug
```

### Benefits

- Direct access to shared storage (`/shared`)
- Pre-configured environment
- GPU access if needed
- Persistent session for long experiments

---

## 2. Ad-Hoc Analysis

### Scenario

Explore a new dataset or prototype an analysis interactively without setting up a formal batch job.

### Solution

```bash
# Quick VPS for exploration
kohakuriver vps create --cores 2 --memory 4G --container data-science

# Connect
kohakuriver vps connect <task_id>

# Inside:
python
>>> import pandas as pd
>>> df = pd.read_csv('/shared/data/dataset.csv')
>>> df.describe()
```

### Benefits

- Instant environment access
- No job setup overhead
- Interactive exploration
- Access to cluster data

---

## 3. Debugging Failed Tasks

### Scenario

A command task failed on a specific node and you need to investigate.

### Solution

```bash
# Check failed task details
kohakuriver task status <failed_task_id>
# Note the node and container used

# Launch VPS on same node with same container
kohakuriver vps create -t <failed_node> --container <same_container>

# Connect and debug
kohakuriver vps connect <vps_id>

# Inside: reproduce the error
/shared/scripts/failing_script.sh
# Inspect environment, files, etc.
```

### Benefits

- Same environment as failed task
- Interactive debugging
- Access to filesystem state
- Can modify and re-test

---

## 4. Jupyter Notebook Server

### Scenario

Run Jupyter notebooks on cluster resources with web access.

### Solution

```bash
# Create VPS with jupyter installed
kohakuriver vps create -t nodeA --cores 4 --memory 8G --container jupyter-env

# Connect with port forwarding
kohakuriver vps connect <task_id> -- -L 8888:localhost:8888

# Inside VPS:
jupyter lab --ip=0.0.0.0 --port=8888 --allow-root --no-browser
```

Then access `http://localhost:8888` in your browser.

### Benefits

- Full Jupyter experience
- Cluster compute resources
- Access to shared data
- Persistent notebooks

---

## 5. GPU Development/Testing

### Scenario

Need interactive access to GPUs for ML development or testing.

### Solution

```bash
# Launch GPU VPS
kohakuriver vps create -t nodeC::0,1 --container cuda-dev --cores 8 --memory 32G

# Connect
kohakuriver vps connect <task_id>

# Inside: test GPU access
python -c "import torch; print(torch.cuda.device_count())"
```

### Benefits

- Dedicated GPU access
- Interactive CUDA debugging
- Test before submitting batch jobs

---

## 6. On-Demand Workstations

### Scenario

Team members occasionally need powerful environments but don't have dedicated machines.

### Solution

```bash
# User launches VPS when needed
kohakuriver vps create --cores 8 --memory 16G

# Work...

# When done, release resources
kohakuriver vps stop <task_id>
```

### Benefits

- Resource sharing among team
- No dedicated hardware per user
- Self-service provisioning
- Clean environment each time

---

## 7. Long-Running Services

### Scenario

Run a temporary service (API, database, etc.) for testing.

### Solution

```bash
# VPS with service container
kohakuriver vps create -t nodeA --container service-env --cores 2 --memory 4G

# Connect and start service
kohakuriver vps connect <task_id>

# Inside:
./start_server.sh &

# Keep running until manually stopped
```

### Benefits

- Persistent container
- Known endpoint
- Easy to restart if needed

---

## Resource Guidelines

| Use Case | Cores | Memory | GPU |
|----------|-------|--------|-----|
| Light development | 2 | 4G | No |
| Data analysis | 4 | 8G | No |
| ML development | 8 | 16G | Yes |
| Heavy training | 8+ | 32G+ | Yes |

---

## Best Practices

| Practice | Why |
|----------|-----|
| **Stop when done** | Free resources for others |
| **Use appropriate resources** | Don't over-allocate |
| **Use shared storage** | Data persists after VPS stops |
| **Document your container** | Others can use same setup |

---

## Anti-Patterns to Avoid

| Don't | Instead |
|-------|---------|
| Leave VPS running indefinitely | Stop when not in use |
| Store data only in container | Use `/shared` for persistence |
| Request maximum resources | Request what you actually need |
| Run batch jobs in VPS | Use command tasks for batch work |

---

## Next Steps

1. [VPS management](1.%20management.md)
2. [SSH access](2.%20ssh-access.md)
3. [Container preparation](3.%20container-prep.md)
