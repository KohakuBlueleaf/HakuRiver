# HakuRiver Overview

## What is HakuRiver?

HakuRiver is a lightweight, self-hosted cluster manager designed for distributing command-line tasks across multiple compute nodes. It provides a simple yet powerful solution for research labs, small teams, and home labs that need to efficiently utilize a modest number of machines (typically 3-8 nodes).

![HakuRiver Architecture Overview](../../images/HakuRiverArch.jpg)

## The Problem HakuRiver Solves

Small to medium research teams often find themselves in an awkward middle ground when it comes to distributed computing:

- **Too many machines** to manage manually with SSH and shell scripts
- **Too few machines** to justify the overhead of complex HPC schedulers like Slurm
- **Unsuitable complexity** of container orchestration systems like Kubernetes for simple task distribution

This creates a situation where you have powerful compute resources but lack an efficient way to utilize them as a unified computing resource without significant operational overhead.

## Core Concept: Your Nodes as One Big Computer

HakuRiver addresses this problem by letting you treat your small cluster as a single powerful computer, with these key design principles:

- **Lightweight Resource Management**: Distribute command-line tasks across your nodes with minimal setup
- **Environment Consistency**: Use Docker containers as portable virtual environments, not as complex application deployments
- **Seamless Synchronization**: Automatically distribute container environments to runners without manual setup on each node
- **Familiar Workflow**: Submit tasks through a simple interface that feels like running a command on your local machine

## System Components

HakuRiver consists of several interconnected components:

1. **Host Server** (`hakuriver.host`):
   - Central coordinator that manages nodes and tasks
   - Provides APIs for task submission and monitoring
   - Manages Docker environments and tarballs
   - Maintains the system database (SQLite)
   - Serves the optional web dashboard

2. **Runner Agents** (`hakuriver.runner`):
   - Run on each compute node
   - Execute tasks within Docker containers
   - Automatically sync container environments from shared storage
   - Monitor and report resource usage back to the Host

3. **Client Tools**:
   - `hakuriver.client` - Submit tasks and monitor status
   - `hakuriver.docker` - Manage Docker environments
   - `hakuriver.docker-shell` - Interactive shell access to containers
   - `hakurun` - Local argument spanning utility for parameter sweeps

4. **Web Dashboard** (Optional):
   - Provides visualization of nodes, tasks, and resources
   - Allows task submission through a graphical interface
   - Monitors task status and logs

## Key Features

- **Managed Docker Environment Workflow** - Create, modify, and distribute reproducible environments
- **Containerized Task Execution** - Run tasks in isolated, consistent environments
- **Automated Environment Synchronization** - Runners automatically fetch required container tarballs
- **CPU/RAM Resource Allocation** - Request specific amounts of resources for each task
- **NUMA Node Targeting** - Bind tasks to specific NUMA nodes for performance optimization
- **Multi-Node Task Submission** - Run the same command across multiple nodes with a single request
- **Persistent Task & Node Records** - Track status, resources, and logs in a central database
- **Web Dashboard** - Monitor and manage your cluster visually

## When to Use HakuRiver

HakuRiver is ideal for:

- Research labs with multiple computers for data processing, simulations, or analysis
- Small teams needing to distribute computational tasks across available machines
- Home lab setups where you want to utilize all your machines efficiently
- Development environments where reproducibility and consistent environments are crucial

It's particularly well-suited for distributing **command-line tasks** that benefit from containerized environments, such as data processing scripts, simulations, machine learning training, and batch processing.

## Next Steps

- [Installation Guide](installation.md) - Learn how to install HakuRiver
- [Quick Start Guide](quick-start.md) - Get up and running quickly
- [Core Concepts](concepts.md) - Understand the key concepts behind HakuRiver