# Quick Start Guide

This guide will help you quickly set up HakuRiver and run your first distributed tasks. We'll cover the essential steps to get a working cluster up and running.

## 1. Setup Overview

A HakuRiver cluster consists of:
- One **Host Node** (central manager)
- One or more **Runner Nodes** (compute nodes)
- Shared storage accessible by all nodes
- Client tools for submitting tasks

## 2. Prerequisites

Before proceeding, ensure:
- HakuRiver is [installed](installation.md) on all nodes
- Docker is running on all nodes
- Shared storage is mounted at the same path on all nodes
- All nodes can reach each other over the network

## 3. Configure HakuRiver

On each machine (Host, Runners, and Client):

```bash
# Create default config
hakuriver.init config

# Edit configuration 
vim ~/.hakuriver/config.toml
```

Critical settings to modify:
```toml
[network]
# On all machines, set this to the Host node's IP/hostname
host_reachable_address = "192.168.1.100"

# On each Runner, set this to the Runner's own IP/hostname
runner_address = "192.168.1.101"  

[paths]
# On all machines, set to the absolute path of your shared storage
shared_dir = "/mnt/shared/hakuriver"
```

## 4. Start the Host Server

On your designated Host node:

```bash
# Start in the foreground (for testing)
hakuriver.host

# Or use systemd for production
hakuriver.init service --host
sudo systemctl start hakuriver-host.service
```

The Host will initialize its database and prepare the default Docker container.

## 5. Start Runner Agents

On each compute node:

```bash
# Start in the foreground (for testing)
hakuriver.runner

# Or use systemd for production
hakuriver.init service --runner
sudo systemctl start hakuriver-runner.service
```

Runners will register with the Host and report their resources.

## 6. Verify Node Registration

From any machine with client access:

```bash
# List registered nodes
hakuriver.client --list-nodes
```

You should see all your Runner nodes listed with status "online".

## 7. Prepare a Docker Environment (Optional)

HakuRiver comes with a default container environment, but you can create custom ones:

```bash
# Create a new base container
hakuriver.docker create-container python:3.12-alpine3.21 my-py312-env

# Start an interactive shell to install packages
hakuriver.docker-shell my-py312-env
# Now inside the container
pip install numpy pandas scikit-learn
exit

# Create a distributable tarball
hakuriver.docker create-tar my-py312-env
```

The environment is now ready for task execution on any Runner.

## 8. Submit Your First Task

Run a simple test task:

```bash
# Submit a simple echo command using the default environment
hakuriver.client --target node1 -- echo "Hello HakuRiver!"

# Or a more complex task with your custom environment
hakuriver.client --target node1 --container my-py312-env -- python -c "import numpy as np; print(np.random.random((3, 3)))"
```

The `--target` flag specifies which Runner should execute the task. You can specify multiple targets to run the same task on multiple nodes:

```bash
hakuriver.client --target node1 --target node2 -- hostname
```

## 9. Monitor Task Status

Check the status of your task:

```bash
# List recent tasks
hakuriver.client --list-tasks

# Check status of a specific task
hakuriver.client --status 1234567890
```

## 10. Examine Task Output

Tasks write their output to files in the shared directory. You can view them with:

```bash
# View standard output
hakuriver.client --stdout 1234567890

# View standard error
hakuriver.client --stderr 1234567890
```

## 11. Run Multiple Tasks with Parameter Sweeps

For parameter sweeps, use the `hakurun` utility:

```bash
# Run a script with multiple parameter combinations locally
hakurun --parallel python script.py span:{1..3} span:[A,B,C]

# Submit a parameter sweep to the cluster
for i in {1..3}; do
  for letter in A B C; do
    hakuriver.client --target node1 -- python script.py $i $letter
  done
done
```

## 12. Explore the Web Dashboard (Optional)

If you've set up the web dashboard:

1. Navigate to `http://<host-ip>:8000` in your browser
2. View nodes, tasks, and resource usage
3. Submit tasks directly from the dashboard

## Next Steps

Now that you have a basic HakuRiver cluster running, you can:

- Learn more about [Container Workflow](../user-guides/container-workflow.md)
- Explore [Task Submission](../user-guides/task-submission.md) options
- Set up [NUMA Targeting](../user-guides/numa-targeting.md) for performance
- Configure [Custom Resource Allocation](../user-guides/resource-allocation.md)

For a deeper understanding of how HakuRiver works, see the [Core Concepts](concepts.md) document.